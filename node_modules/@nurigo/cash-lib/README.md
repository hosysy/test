# cash-lib

## Installation
```
  npm install @nurigo/cash-lib
```

## Function List
- deductCashByType(Object) // 메시지 타입으로 캐쉬 차감 요청 (Rest v3 사용중)
- deductCash(Object) // Cash, Point, Amount로 캐쉬 충전/차감 요청 (Rest v1, 2 사용중)
- getBalance(Object) // 잔액 가져오기

## Usage
```
  const cash = require('@nurigo/cash-lib')

  // deductCashByType ex)
  let payload = {
    'member_srl': 'member_srl', // 필수
    'user_id': 'user_id', // 필수
    'messages': {
      'sms': 1,
      'lms': 0,
      'mms': 0,
      'ata': 0,
      'cta': 0,
      'push': 0
    },
    'app_id': 'app_id',
    'simulation': 'true', // 'true' 면 실제 차감은 하지 않음
    'sync': 'true' // 'true'면 maindb와 sync 안함
  }

  cash.deductCashByType(payload).then((res) => {
    console.log(res)
  })
  .catch((err) => {
    console.log(err)
  })


  // deductCash ex)
  let payload = {
    'member_srl': 'member_srl', // 필수
    'user_id': 'user_id', // 필수
    'cash': 20, // 충전/차감 캐쉬
    'point': 20, // 충전/차감 포인트
    'amount' : 20, // 차감 총액 ('amount'는 차감만 가능)
    'type': 'recharge' // 'recharge', 'deduct', 'init' 중 하나
  }

  cash.deductCash(payload).then((res) => {
    console.log(res)
  })
  .catch((err) => {
    console.log(err)
  })


  // getBalance ex)
  let payload = {
    // member_srl이나 user_id 둘 중 하나 필수
    'member_srl': 'member_srl',
    'user_id': 'user_id'
  }

  cash.getBalance(payload).then((res) => {
    console.log(res)
  })
  .catch((err) => {
    console.log(err)
  })
```
