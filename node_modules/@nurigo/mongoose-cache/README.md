# mongoose-cache #

mongoose와 redis를 이용하여 캐시를 사용할 수 있습니다.
현재 find, findOne, update만 캐시기능이 사용되고 있습니다.

## Usage ##

```javascript
var mongoose = require('mongoose')
var mongooseCache = require('@nurigo/mongoose-cache')

// 이해를 돕기 위한 Schema
RecordSchema = new Schema({
  num: Number,
  str: String,
  date: {
    type: Date,
    default: Date.now
  }
})

// 캐시 사용
mongooseCache(mongoose, [
  {
    name: 'Record', // 적용할 모델 
    key: [
      'num' // 사용할 키값 (해당 키로 캐시 데이터가 만들어 집니다.)
    ]
  }
], __dirname, { ttl: 5 })


// 별다른 변경없이 사용하면 됩니다.
Record
  .find({ num: 1 })
  .exec(function(err, records) {
    ...
  })

// 설정해놓은 키값이 아니라면 캐시 하지 않습니다.
Record
  .find({ str: 1 })
  .exec(function(err, records) {
    ...
  })


// 아래 방법으로 캐시데이터를 임의로 삭제할 수 있습니다.
mongooseCache.clearCache('customKey')

```

## Test ##
npm test
