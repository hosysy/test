## Release Note
* 1.1 이하 : 자세히 기억안남
* 1.1 : webpack 추가 / ES6 문구 에러에 따른 처리 
* 1.1.1 : 사용안되는 library 들을 devDependecies 로 뺌
* 1.1.2 : main 을 dist/index.js로 변경
* 1.1.3 : webpack 을 output 을 index.js 로 변경
* 1.1.4 : wombat hook test
* 1.1.5 : wombat hook test2
* 1.1.6 : user_id 추가
* 1.1.7 : AWS creds 추가
* 1.2.0 : Dynamo-cache 추가


## 설치하기 
```

    npm install @nurigo/cs_user     
    
```


## Cache 기능 사용하기

* 기본 `cache` 기능 사용. 기본으로 cache를 ttl 3초로 사용함
```
    var user = require('@nurigo/cs_user')
    var payload = { value : "kang85", is_admin: "N" }
    const res = await user.getUserById(payload)
```
* `cache` 시간을 `7초`로 하는경우
```
    var user = require('@nurigo/cs_user')
    user.option({ ttl: 7 })
    var payload = { value : "kang85", is_admin: "N" }
    const res = await user.getUserById(payload)
```
* `cache` 를 사용하고 싶지 않은경우
```
    var user = require('@nurigo/cs_user')
    user.option({ cache: false })
    var payload = { value : "kang85", is_admin: "N" }
    const res = await user.getUserById(payload)
```


## 사용가능 함수
* getUserById( { value, is_admin } )
* getUserBySrl( { value, is_admin } )
- value : 찾으려는 값        ex) "kang85" , "414343"
- is_admin : 관리자 여부 ( 'Y', 'N' ) 
    * 관리자값이 Y 이면 password 를 포함한 모든 데이터를 가져옵니다. N 이면 간단한 사용자 정보만 가져옵니다. 

## 사용방법
### getUserById
```

    var user = require('@nurigo/cs_user')

    // is_admin 의 값이 Y 이면 현재 사용자의 모든 정보를 가져옴. 
    var payload = { value : "kang85", is_admin: "N" }
    user.getUserById(payload)
    .then(res => {

        console.log("getUserById result : ", res)

    })
    .catch(err => {

        console.log(err)

    })

```


### getUserBySrl
```

    var user = require('@nurigo/cs_user')

    // is_admin 의 값이 Y 이면 현재 사용자의 모든 정보를 가져옴. 
    var payload = { value : "kang85", is_admin: "N" }
    user.getUserBySrl(payload)
    .then(res => {

        console.log("getUserBySrl result : ", res)

    }).catch(err => {

        console.log(err)

    })

```


## Format
### Payload format
```

    var payload = {
        value : "<STRING>",
        is_admin : "[ 'Y' || 'N' ]"
    }

```
* is_admin 값이 Y이면 모든값을 가져옵니다. N 이면 정해놓은 일부분의 데이터만 가져옵니다. (보안문제) 
* 필요한 데이터가 있으면 말해주세요~ 추가할께요. 현재는 ["email_address, user_name, member_srl, is_admin, nick_name, account_id"] 만 가져옵니다. 

### Response format
```

    var response = {
        status: [ "Success" || "Error" ],       // request 에 대한 성공/실패 여부
        err: "<OBJECT>",                        // 에러가 있으면 값이 들어옵니다
        value : "<STRING>",                     // 검색했던 값
        target: [ "user_id" || "srl" ],         // user_id / srl 인지
        is_admin: [ "Y" || "N" ],               // 검색시 입력한 is_admin 
        message: "<STRING>",                    // 메시지가 있으면 가져옵니다. 
        data: "<OBJECT>"                        // user info
    }

```

