
require('debug-trace')({
  always: true,
  colors: {
    log: '31',
    warn: '35',
    info: '32'
  }
})
const user = require('./src')
// user.option({ ttl: 7 })
// user.option({ cache: false })

let counter = 1
async function run () {
  (async function test () {
    var payload = { value: 'cooltest', is_admin: 'Y' }
    let res = await user.getUserById(payload)

    var payload = { value: 'cooltest', is_admin: 'N' }
    res = await user.getUserById(payload)

    var payload = { value: 'cooltest', is_admin: 'Y' }
    res = await user.getUserById(payload)

    payload.value = '12925149'
    res = await user.getUserBySrl(payload)

    if (counter < 5) {
      console.log('counter : ', counter)
      counter++
      setTimeout(test, 1000)
    }
  })()
}

run()
